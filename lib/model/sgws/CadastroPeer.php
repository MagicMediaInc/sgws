<?php


/**
 * Skeleton subclass for performing query and update operations on the 'cadastro' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.1 on:
 *
 * 25/09/2013 20:08:13
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model.sgws
 */
class CadastroPeer extends BaseCadastroPeer {

    public static function getClientes($codigocadastro=0)
    {
        $c = new Criteria();
        //Eliminamos la columnas de seleccion en caso de que esten definidas
        $c->clearSelectColumns();
        //Se Agregan las Columnas necesarias
        $c->addSelectColumn(self::CODIGOCADASTRO);
        $c->addSelectColumn(self::NOMEFANTASIA);        
        if ($codigocadastro!=0)            
            $c->add(self::CODIGOCADASTRO, $codigocadastro, Criteria::EQUAL);
        else $c->add(self::TIPOCADASTRO, 'Cliente', Criteria::EQUAL);
        
        $rs = self::doSelectStmt($c);
        //Se recuperan los registros y se genera arreglo
        while($res = $rs->fetch())
        {
            $dato['id']      = $res['CODIGOCADASTRO'];
            $dato['nome']    = $res['NOMEFANTASIA'];
            $datos[] = $dato;
        }
        if (!empty($datos)){
            return $datos;
        }else{
            return false;
        }
    }
    
    public static function getAll()
    {
        $c = new Criteria();
        $c->addAscendingOrderByColumn(self::CODIGOCADASTRO);
        return self::doSelect($c);
    }
    
    public static function getAllSubtipos()
    {
        $c = new Criteria();
        $c->addAscendingOrderByColumn(self::CODIGOCADASTRO);
        $c->add(self::SUBTIPO, '',  Criteria::NOT_EQUAL);
        return self::doSelect($c);
    }

} // CadastroPeer
